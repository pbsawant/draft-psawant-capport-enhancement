<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE rfc [
  <!ENTITY nbsp    "&#160;">
  <!ENTITY zwsp   "&#8203;">
  <!ENTITY nbhy   "&#8209;">
  <!ENTITY wj     "&#8288;">
]>
<?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
<!-- generated by https://github.com/cabo/kramdown-rfc version 1.7.17 (Ruby 3.0.2) -->
<rfc xmlns:xi="http://www.w3.org/2001/XInclude" ipr="trust200902" docName="draft-sawant-capport-api-state-enhancement-00" category="info" submissionType="IETF" tocInclude="true" sortRefs="true" symRefs="true" version="3">
  <!-- xml2rfc v2v3 conversion 3.21.0 -->
  <front>
    <title abbrev="CAPPORT API State Enhancement">Captive Portal API State Structure Enhancement</title>
    <seriesInfo name="Internet-Draft" value="draft-sawant-capport-api-state-enhancement-00"/>
    <author fullname="Paresh Sawant">
      <organization>Apple Inc.</organization>
      <address>
        <email>paresh_sawant@apple.com</email>
      </address>
    </author>
    <date year="2024" month="June" day="25"/>
    <keyword>capport api state</keyword>
    <keyword>token</keyword>
    <keyword>internet access</keyword>
    <keyword>notification</keyword>
    <abstract>
      <?line 23?>

<t>This document specifies a new key in Captive Portal API State data
structure. The purpose of the new key is to allow clients to
perform the client authentication without user interaction.</t>
    </abstract>
  </front>
  <middle>
    <?line 29?>

<section anchor="introduction">
      <name>Introduction</name>
      <t>As described in <xref target="RFC8908"/>, the Captive Portal API data structure is
specified in JavaScript Object Notation (JSON) <xref target="RFC8259"/>. Requests
and responses for the Captive Portal API use the
"application/captive+json" media type. The original specification
specifies key "user-portal-url" to convey the web portal URL to the
client. Although in most cases client devices are capable of
presenting the web portal to the user, there are types of devices
that are not built to support the user interaction with the web
portal. This document specifies a new key that allows client to
perform the authentication without user interaction.</t>
    </section>
    <section anchor="conventions-and-definitions">
      <name>Conventions and Definitions</name>
      <t>The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>", "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL
NOT</bcp14>", "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>", "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>",
"<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be interpreted as
described in BCPÂ 14 <xref target="RFC2119"/> <xref target="RFC8174"/> when, and only when, they
appear in all capitals, as shown here.</t>
      <?line -18?>

</section>
    <section anchor="api-state-structure-enhancement">
      <name>API State Structure Enhancement</name>
      <t>Table 1 shows the new key that can be optionally included in the
top-level of the JSON structure returned by the API server.</t>
      <artset>
        <artwork type="svg"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="304" width="520" viewBox="0 0 520 304" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
            <path d="M 8,32 L 8,288" fill="none" stroke="black"/>
            <path d="M 152,32 L 152,288" fill="none" stroke="black"/>
            <path d="M 232,32 L 232,288" fill="none" stroke="black"/>
            <path d="M 512,32 L 512,288" fill="none" stroke="black"/>
            <path d="M 8,30 L 512,30" fill="none" stroke="black"/>
            <path d="M 8,34 L 512,34" fill="none" stroke="black"/>
            <path d="M 8,62 L 512,62" fill="none" stroke="black"/>
            <path d="M 8,66 L 512,66" fill="none" stroke="black"/>
            <path d="M 8,288 L 512,288" fill="none" stroke="black"/>
            <g class="text">
              <text x="32" y="52">Key</text>
              <text x="180" y="52">Type</text>
              <text x="288" y="52">Description</text>
              <text x="80" y="84">authentication-</text>
              <text x="188" y="84">string</text>
              <text x="252" y="84">It</text>
              <text x="300" y="84">provides</text>
              <text x="352" y="84">the</text>
              <text x="384" y="84">URL</text>
              <text x="412" y="84">of</text>
              <text x="440" y="84">the</text>
              <text x="60" y="100">server-url</text>
              <text x="300" y="100">Authentication</text>
              <text x="388" y="100">Server</text>
              <text x="436" y="100">that</text>
              <text x="476" y="100">MUST</text>
              <text x="252" y="116">be</text>
              <text x="300" y="116">accessed</text>
              <text x="356" y="116">over</text>
              <text x="396" y="116">TLS.</text>
              <text x="300" y="132">Authentication</text>
              <text x="388" y="132">Server</text>
              <text x="296" y="148">authenticates</text>
              <text x="384" y="148">clients</text>
              <text x="440" y="148">using</text>
              <text x="480" y="148">the</text>
              <text x="260" y="164">HTTP</text>
              <text x="340" y="164">authentication</text>
              <text x="440" y="164">framework</text>
              <text x="280" y="180">specified</text>
              <text x="332" y="180">in</text>
              <text x="388" y="180">[RFC9110].</text>
              <text x="256" y="196">The</text>
              <text x="300" y="196">server</text>
              <text x="348" y="196">MUST</text>
              <text x="384" y="196">NOT</text>
              <text x="432" y="196">require</text>
              <text x="260" y="212">user</text>
              <text x="328" y="212">interaction</text>
              <text x="388" y="212">on</text>
              <text x="416" y="212">the</text>
              <text x="460" y="212">client</text>
              <text x="272" y="228">device.</text>
              <text x="320" y="228">The</text>
              <text x="364" y="228">client</text>
              <text x="412" y="228">MUST</text>
              <text x="452" y="228">have</text>
              <text x="480" y="228">a</text>
              <text x="284" y="244">credential</text>
              <text x="340" y="244">to</text>
              <text x="384" y="244">perform</text>
              <text x="432" y="244">the</text>
              <text x="300" y="260">authentication</text>
              <text x="392" y="260">without</text>
              <text x="444" y="260">user</text>
              <text x="292" y="276">interaction.</text>
            </g>
          </svg>
        </artwork>
        <artwork type="ascii-art"><![CDATA[
+=================+=========+==================================+
| Key             | Type    | Description                      |
+=================+=========+==================================+
| authentication- | string  | It provides the URL of the       |
| server-url      |         | Authentication Server that MUST  |
|                 |         | be accessed over TLS.            |
|                 |         | Authentication Server            |
|                 |         | authenticates clients using the  |
|                 |         | HTTP authentication framework    |
|                 |         | specified in [RFC9110].          |
|                 |         | The server MUST NOT require      |
|                 |         | user interaction on the client   |
|                 |         | device. The client MUST have a   |
|                 |         | credential to perform the        |
|                 |         | authentication without user      |
|                 |         | interaction.                     |
+-----------------+---------+----------------------------------+
]]></artwork>
      </artset>
    </section>
    <section anchor="security-considerations">
      <name>Security Considerations</name>
      <t>This document recommends security considerations specified in
<xref section="7" sectionFormat="of" target="RFC8908"/>.</t>
    </section>
    <section anchor="privacy-considerations">
      <name>Privacy Considerations</name>
      <t>This document recommends privacy consideration specified in
<xref section="7.1" sectionFormat="of" target="RFC8908"/>.</t>
    </section>
    <section anchor="iana-considerations">
      <name>IANA Considerations</name>
      <t>IANA is requested to add the new key specified in Table 1.</t>
    </section>
  </middle>
  <back>
    <references anchor="sec-normative-references">
      <name>Normative References</name>
      <reference anchor="RFC8908" target="https://www.rfc-editor.org/info/rfc8908" xml:base="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8908.xml">
        <front>
          <title>Captive Portal API</title>
          <author fullname="T. Pauly" initials="T." role="editor" surname="Pauly"/>
          <author fullname="D. Thakore" initials="D." role="editor" surname="Thakore"/>
          <date month="September" year="2020"/>
          <abstract>
            <t>This document describes an HTTP API that allows clients to interact with a Captive Portal system. With this API, clients can discover how to get out of captivity and fetch state about their Captive Portal sessions.</t>
          </abstract>
        </front>
        <seriesInfo name="RFC" value="8908"/>
        <seriesInfo name="DOI" value="10.17487/RFC8908"/>
      </reference>
      <reference anchor="RFC8259" target="https://www.rfc-editor.org/info/rfc8259" xml:base="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8259.xml">
        <front>
          <title>The JavaScript Object Notation (JSON) Data Interchange Format</title>
          <author fullname="T. Bray" initials="T." role="editor" surname="Bray"/>
          <date month="December" year="2017"/>
          <abstract>
            <t>JavaScript Object Notation (JSON) is a lightweight, text-based, language-independent data interchange format. It was derived from the ECMAScript Programming Language Standard. JSON defines a small set of formatting rules for the portable representation of structured data.</t>
            <t>This document removes inconsistencies with other specifications of JSON, repairs specification errors, and offers experience-based interoperability guidance.</t>
          </abstract>
        </front>
        <seriesInfo name="STD" value="90"/>
        <seriesInfo name="RFC" value="8259"/>
        <seriesInfo name="DOI" value="10.17487/RFC8259"/>
      </reference>
      <reference anchor="RFC2119" target="https://www.rfc-editor.org/info/rfc2119" xml:base="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2119.xml">
        <front>
          <title>Key words for use in RFCs to Indicate Requirement Levels</title>
          <author fullname="S. Bradner" initials="S." surname="Bradner"/>
          <date month="March" year="1997"/>
          <abstract>
            <t>In many standards track documents several words are used to signify the requirements in the specification. These words are often capitalized. This document defines these words as they should be interpreted in IETF documents. This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t>
          </abstract>
        </front>
        <seriesInfo name="BCP" value="14"/>
        <seriesInfo name="RFC" value="2119"/>
        <seriesInfo name="DOI" value="10.17487/RFC2119"/>
      </reference>
      <reference anchor="RFC8174" target="https://www.rfc-editor.org/info/rfc8174" xml:base="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8174.xml">
        <front>
          <title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
          <author fullname="B. Leiba" initials="B." surname="Leiba"/>
          <date month="May" year="2017"/>
          <abstract>
            <t>RFC 2119 specifies common key words that may be used in protocol specifications. This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the defined special meanings.</t>
          </abstract>
        </front>
        <seriesInfo name="BCP" value="14"/>
        <seriesInfo name="RFC" value="8174"/>
        <seriesInfo name="DOI" value="10.17487/RFC8174"/>
      </reference>
    </references>
  </back>
  <!-- ##markdown-source:
H4sIAAAAAAAAA61W3W7bNhS+51OcuTdbXXl20KGN0bXzkhR1l8Re7FwUQTBQ
Eh2zkUmVpGx4Sfose5Y92c4hJUdKnCYFpgubPOT5+84foyhiTrpM9GGP504u
BYy1cTyDwXgIE8edwF9TJK4wAg7UnKtELIRyjMexEUtkG4zHo5Np7X79VoKE
C23WfZBqplmqE8UXqCw1fOYiy1dcuSjheY5KI57LyJKISNyKiLpdZot4Ia2V
Wrl1jtzDg+l7xmRu+oC2WbfT7e52d9ilWK+0SfsMIihlAsoEL5OITl8KRQup
nDBK4HGSCGuJpLSTM4n2ohbGctmHM6eTF2BRihEzi6v1ghbnjPHCzbUhPQzw
mxVZFtwacyPsHCbeL3+mzQVX8m8vtg+DPM8EDFXS8YdiwWXWh9xz/RXQ+I3T
nU6iF4xFUQQ8ts7wxDE2nUsLiGBBsIDNRYIGCwsclFgBOo9uPRzFlDvObBXK
DkznAvLC5NoK0DNwuN2IsYgU8CzTK0gyidqIwHJhZtos/NVABgIC/0vYYCUR
l8JBYYUJGKPheNAJrixkmmaCsWeIgDM6LfwhXD2Tte0NYwN0U9jEyFik5NPV
1Q8n7/de73Zf39y88Oq3eEn+wcY/9IFVCHkZH/mST1Bk7mAUfxaJg2PtgtU/
fpyMjn+qtOz8sntz04ET8aUQ1lnGVQoYnlwri1gjAA8ZgE7TEWtRAEtEfk7C
vfZnq1ULFiKVHCiHA/7ayAupkL80tcy+29BSNFqEZpR7RVFhshYFJ9FqiWdk
ykrEEE7h9OSQDsmKEKAODDIKycWcMFho67AwyI8yfqlYyoRSCBFDU3mcUTKw
HB2msKqLuxqCdB9gHwnkI15yyVIalQKZm3PnT7CsIC5k5ojVFqEoKxH1HPHJ
U6ljQR2h9FjOB02Uqxuv7uTq05P0GewRroq2qAMjvy9mUkm/pwIUXiU1GQut
o9PJtPUi/MPxyK9PDv48HZ4c7NN68mFweLhZsPLG5MPo9HD/dnXLuTc6Ojo4
3g/MSIUGibWOBp/whKxqjcbT4eh4cNiisLoGRj4cGmIRfMNQOqwAblmjpH7f
G//7T+9lmfQ7vR4mfVUBvVcvcbNCzII2rbJ1uUUg1wzzW3CCjmCntJEYKuyP
3IKd65UCSgtE8/kZIXPehzdxkvdevi0J5HCDWGHWIHrM7lPuMQcQt5C2qNmg
2aDfQbpp7+BTY1/hXiO+eZdJJSDqvX73llEKPTY42dSXWc+DZRuN1+dywhVF
T+eUdYgwtfUkK9IQOKptp/MoE0uRVY2bGlit92HIC5xuKcShQ5BFmOxLYTAq
X79+Bc7t8oK1f737tbesHvza7Br+QKPr3zVMsROE1b7PN+8FbP2u/w8LmsUd
oV7EgRoXroYOcqOXEjPf40DtsUSssuC6BIYaa+XCrTODZueY+KshSj6TvYB7
btVWGMfwwsBgaOKdHk46TQy+LWC7Bd8hoIbPpu1b7H1Vb39UwIfpdHy3hc4M
vnawC14+xYLGGD7DBrPb63XPayg8JoDabogSVP0DU/xLIY14moB7o0ar+iPm
cQFhqoWZXTJ5S+YcnwD8CQISI1LCL0zQ+nB6IgbfmmFPElAfdPcuBgHt6O7X
3rJ68GtTa2GAHXAiksJIt6ZparH6DN8M0PqkMgIfubjCWWorjqTB0cgddnWF
gr37r6iMb9+EfnKPjVzy5Dt05iVDQ+WDGju9LTqHg+PBPYWeiDpNeEGiJHpM
p2mj0zeKohwI5Ss55skl+w+uDDQXmA0AAA==

-->

</rfc>
